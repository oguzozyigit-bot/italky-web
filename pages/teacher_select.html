<!-- FILE: /pages/teacher_select.html -->
<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
<title>italkyAI â€¢ Dil SeÃ§</title>
<link rel="icon" href="data:," />

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;800;900&family=Space+Grotesk:wght@700&display=swap" rel="stylesheet">

<style>
  #pageContent{ height:100%; }

  /* âœ… Home gibi dengeli boÅŸluk */
  .wrap{
    height:100%;
    padding: 16px 18px; /* Ã¼st-alt / saÄŸ-sol dengeli */
    overflow:hidden;
    display:flex;
  }

  /* âœ… Grid tÃ¼m alanÄ± doldurur, kartlar aynÄ± boy */
  .grid{
    flex:1;
    width:100%;
    display:grid;
    grid-template-columns: 1fr 1fr;
    gap: 18px;
    grid-auto-rows: var(--cardH);
  }

  /* âœ… Home kart hissi */
  .card{
    height: var(--cardH);
    border-radius: 30px;
    border: 1px solid rgba(255,255,255,0.10);
    background: linear-gradient(145deg, rgba(255,255,255,0.08) 0%, rgba(255,255,255,0.02) 100%);
    padding: 18px 16px;
    cursor:pointer;
    transition: all .25s cubic-bezier(0.22, 1, 0.36, 1);
    user-select:none;
    overflow:hidden;

    display:flex;
    flex-direction:column;
    align-items:center;
    justify-content:center;
    text-align:center;
    gap: 10px;
  }
  .card:active{ transform: scale(.94); background: rgba(255,255,255,0.10); }

  /* âœ… Homeâ€™daki ikon kutusu gibi */
  .iconWrap{
    width: 78px;
    height: 78px;
    border-radius: 26px;
    display:flex;
    align-items:center;
    justify-content:center;
    background: rgba(255,255,255,0.05);
    border: 1px solid rgba(255,255,255,0.12);
    box-shadow: 0 10px 26px rgba(0,0,0,0.25) inset;
  }

  /* âœ… Bayrak kÃ¼Ã§Ã¼k */
  .flag{
    font-size: var(--flagSize);
    line-height:1;
    filter: drop-shadow(0 0 10px rgba(255,255,255,0.10));
  }

  /* âœ… Ã¶nce rol (kÃ¼Ã§Ã¼k) */
  .role{
    font-size: var(--roleSize);
    font-weight: 900;
    color: rgba(255,255,255,0.68);
    line-height:1.15;
  }

  /* âœ… sonra isim (bÃ¼yÃ¼k ve belirgin) */
  .name{
    font-size: var(--nameSize);
    font-weight: 1000;
    letter-spacing: -0.4px;
    line-height:1.05;
    color:#fff;
  }

  /* toast (opsiyonel) */
  .toast{
    position: fixed;
    left:50%;
    top:18px;
    transform:translateX(-50%) translateY(-120px);
    background:rgba(10,10,18,.92);
    border:1px solid rgba(165,180,252,.35);
    padding:10px 14px;
    border-radius:999px;
    color:#fff;
    z-index:99999;
    font-weight:900;
    font-size:12px;
    transition:.28s;
    backdrop-filter: blur(12px);
    pointer-events:none;
  }
  .toast.show{ transform:translateX(-50%) translateY(0); }
</style>
</head>

<body>
<main id="pageContent">
  <div class="wrap">
    <div class="grid" id="teacherGrid"></div>
  </div>
</main>

<div class="toast" id="toast"></div>

<script type="module">
  import { mountShell } from "/js/ui_shell.js";
  mountShell({ scroll:"none" });

  const KEY_TEACHER="italky_teacher_pref";
  const KEY_LEVEL_DONE="italky_level_done";
  const KEY_PLAN="italky_plan_pref";
  const KEY_MINS="italky_lesson_mins";

  const TEACHERS = [
    { id:"dora",   flag:"ðŸ‡¬ðŸ‡§", role:"Ä°ngilizce Ã–ÄŸretmeni",   name:"Dora" },
    { id:"ayda",   flag:"ðŸ‡©ðŸ‡ª", role:"Almanca Ã–ÄŸretmeni",     name:"Ayda" },
    { id:"jale",   flag:"ðŸ‡«ðŸ‡·", role:"FransÄ±zca Ã–ÄŸretmeni",   name:"Jale" },
    { id:"ozan",   flag:"ðŸ‡ªðŸ‡¸", role:"Ä°spanyolca Ã–ÄŸretmeni",  name:"Ozan" },
    { id:"sencer", flag:"ðŸ‡®ðŸ‡¹", role:"Ä°talyanca Ã–ÄŸretmeni",   name:"Sencer" },
    { id:"sungur", flag:"ðŸ‡·ðŸ‡º", role:"RusÃ§a Ã–ÄŸretmeni",       name:"Sungur" },
    { id:"huma",   flag:"ðŸ‡¯ðŸ‡µ", role:"Japonca Ã–ÄŸretmeni",     name:"HÃ¼ma" },
    { id:"umay",   flag:"ðŸ‡¨ðŸ‡³", role:"Ã‡ince Ã–ÄŸretmeni",       name:"Umay" },
  ];

  const $ = (id)=>document.getElementById(id);

  function goNext(){
    const levelDone = (localStorage.getItem(KEY_LEVEL_DONE)||"")==="1";
    if(!levelDone){ location.href="/pages/level_test.html"; return; }

    const plan = (localStorage.getItem(KEY_PLAN)||"").trim();
    const mins = (localStorage.getItem(KEY_MINS)||"").trim();
    if(plan && mins) location.href="/pages/teacher_course.html";
    else location.href="/pages/plan_select.html";
  }

  function render(){
    const grid = $("teacherGrid");
    grid.innerHTML = TEACHERS.map(t=>`
      <div class="card" data-id="${t.id}">
        <div class="iconWrap"><div class="flag">${t.flag}</div></div>
        <div class="role">${t.role}</div>
        <div class="name">${t.name}</div>
      </div>
    `).join("");

    grid.querySelectorAll(".card").forEach(c=>{
      c.addEventListener("click", ()=>{
        localStorage.setItem(KEY_TEACHER, c.getAttribute("data-id"));
        goNext();
      });
    });
  }

  /* âœ… Kartlar sayfaya daÄŸÄ±lsÄ±n (aÅŸaÄŸÄ± kayma yok) */
  function fit(){
    const headerH = document.querySelector(".premium-header")?.offsetHeight || 0;
    const footerH = document.querySelector(".premium-footer")?.offsetHeight || 0;

    // wrap padding (16 + 16) ve kÃ¼Ã§Ã¼k gÃ¼venlik payÄ±
    const usable = window.innerHeight - headerH - footerH - 40;

    const rows = 4;   // 8 kart => 4 satÄ±r
    const gap = 18;

    let cardH = (usable - (gap*(rows-1))) / rows;
    cardH = Math.max(150, Math.min(210, cardH)); // dengeli sÄ±nÄ±r

    document.documentElement.style.setProperty("--cardH", cardH + "px");
    document.documentElement.style.setProperty("--flagSize", Math.max(26, Math.min(34, cardH*0.18)) + "px");
    document.documentElement.style.setProperty("--roleSize", Math.max(12, Math.min(14, cardH*0.09)) + "px");
    document.documentElement.style.setProperty("--nameSize", Math.max(18, Math.min(22, cardH*0.13)) + "px");
  }

  render();
  requestAnimationFrame(()=>fit());
  window.addEventListener("resize", fit);
</script>
</body>
</html>
