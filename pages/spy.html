<!-- FILE: /pages/spy.html -->
<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
<title>italkyAI ‚Ä¢ Audio Spy</title>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;700;800&family=Share+Tech+Mono&display=swap" rel="stylesheet">

<style>
:root{
  --bg:#000900;
  --radar:#00ffcc;
  --radar-dim:rgba(0,255,204,.15);
  --alert:#ff3300;
  --ok:#00e676;
  --text:#e0fffb;
  --border:rgba(0,255,204,.30);
  --gold:#ffb800;

  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}

*{box-sizing:border-box;-webkit-tap-highlight-color:transparent}
html,body{margin:0;width:100%;height:100%;background:var(--bg);font-family:'Outfit',sans-serif;color:var(--text);overflow:hidden}

/* Shell i√ßine girecek */
#pageContent{
  height: 100%;
  width: 100%;
  position: relative;
}

/* Arka grid */
.bg{
  position:absolute; inset:-50%; width:200%; height:200%;
  background-image: radial-gradient(var(--border) 1px, transparent 1px);
  background-size:60px 60px; opacity:.10;
  animation:spin 60s linear infinite;
  pointer-events:none;
}
@keyframes spin{to{transform:rotate(360deg)}}

/* ƒ∞√ß panel (shell main i√ßinde) */
.spy-wrap{
  position:relative;
  height: 100%;
  display:flex;
  flex-direction:column;
  gap: 12px;
  padding: 14px 14px calc(14px + var(--safe-bottom));
}

/* Mini HUD (shell header zaten var, burada oyun HUD‚Äôu) */
.hud{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;

  padding: 12px 12px;
  border-radius: 18px;
  border: 1px solid var(--border);
  background: rgba(0,15,10,.55);
  backdrop-filter: blur(14px);
  -webkit-backdrop-filter: blur(14px);
}
.score-box{text-align:left; line-height:1.05}
.score{
  font-family:'Share Tech Mono';
  font-size:22px;
  color:var(--radar);
  text-shadow:0 0 10px var(--radar);
}
.pb-chip{font-size:10px;color:var(--gold);font-weight:900;letter-spacing:.6px;margin-top:4px}
.hTitle{
  font-family:'Share Tech Mono';
  font-size: 13px;
  letter-spacing: 1px;
  opacity: .9;
  white-space:nowrap;
}
.hRight{display:flex;align-items:center;gap:10px}
.btn{
  width:40px;height:40px;border-radius:14px;
  border:1px solid var(--border);
  background:rgba(0,40,30,.45);
  display:flex;align-items:center;justify-content:center;
  cursor:pointer; transition:.18s;
  user-select:none;
}
.btn:active{transform:scale(.96); background:rgba(0,255,204,.12)}

/* Oyun g√∂vde */
.main{
  flex:1;
  display:none;
  flex-direction:column;
  justify-content:space-between;
  gap: 12px;
  min-height: 0;

  padding: 14px;
  border-radius: 22px;
  border: 1px solid var(--border);
  background: rgba(0,15,10,.65);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
}

.visual{
  width:170px;height:170px;border:2px solid var(--border);border-radius:50%;
  margin:4px auto 2px;
  position:relative;
  background:radial-gradient(circle,rgba(0,255,204,0.10) 0%,transparent 70%);
  box-shadow:0 0 30px var(--radar-dim);
}
.scan{
  position:absolute;inset:0;border-radius:50%;
  background:conic-gradient(from 0deg,transparent 0deg,rgba(0,255,204,0.12) 60deg,var(--radar) 360deg);
  opacity:.15; animation:scan 4s linear infinite
}
@keyframes scan{to{transform:rotate(360deg)}}

.wave{position:absolute;inset:0;display:flex;align-items:center;justify-content:center;gap:4px}
.wave.playing .bar{animation:eq .5s infinite ease-in-out alternate;background:var(--radar)}
.bar{width:5px;height:12px;border-radius:3px;background:var(--radar);opacity:.28}
@keyframes eq{to{height:52px;opacity:1;box-shadow:0 0 10px var(--radar)}}

.listen-btn{
  margin: 2px auto 6px;
  padding: 12px 30px;
  border-radius: 30px;
  border:2px solid var(--radar);
  background:transparent;
  color:var(--radar);
  font-family:'Share Tech Mono';
  font-size:14px;
  cursor:pointer;
  transition:.16s;
  font-weight:900;
}
.listen-btn:active:not(:disabled){transform:scale(.96);background:var(--radar-dim)}
.listen-btn:disabled{opacity:.4;border-color:#555;color:#555;cursor:not-allowed}

.opts{display:flex;flex-direction:column;gap:10px}
.opt{
  padding:15px;
  border-radius:14px;
  border:1px solid var(--border);
  background:rgba(0,40,30,.55);
  cursor:pointer;
  font-weight:900;
  transition:.16s;
  text-align:center;
  font-size: 15px;
  user-select:none;
}
.opt:active{transform:scale(.99)}
.opt.correct{border-color:var(--ok);background:rgba(0,230,118,.16);color:var(--ok)}
.opt.wrong{border-color:var(--alert);background:rgba(255,51,0,.16);color:var(--alert)}

.stats-bar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  padding: 6px 2px 0;
  font-family:'Share Tech Mono';
  font-size:11px;
  color:var(--radar);
}

.toast{
  position: fixed;
  left:50%;
  top: calc(16px + var(--safe-top));
  transform:translateX(-50%) translateY(-120px);
  background:rgba(0,15,10,.95);
  border:1px solid var(--radar);
  padding:10px 16px;
  border-radius:999px;
  font-weight:1000;
  font-size:12px;
  opacity:0;
  transition:0.25s;
  z-index: 999999;
  pointer-events:none;
  max-width:min(92vw,520px);
  text-align:center;
}
.toast.show{transform:translateX(-50%) translateY(0); opacity:1}

/* Modal */
.modal{
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.92);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index: 99999;
  padding: 18px;
}
.card{
  background:#001510;
  border:1px solid var(--radar);
  border-radius:24px;
  padding: 20px 16px;
  width: min(440px, 100%);
  text-align:center;
}
.lang-grid{display:grid;grid-template-columns:repeat(5,1fr);gap:8px;margin:16px 0}
.lang-btn{
  padding:12px 0;border-radius:12px;border:1px solid var(--radar);color:var(--radar);
  font-family:'Share Tech Mono';font-weight:1000;cursor:pointer;background:transparent
}
.lang-btn.active{background:var(--radar);color:#000}
.main-btn{
  width:100%;
  padding:16px;
  border:none;
  border-radius:14px;
  background:var(--radar);
  color:#000;
  font-weight:1000;
  margin-top:12px;
  cursor:pointer
}
.exit-btn{ background:#141414 !important; color:#ff3300 !important; border:1px solid #ff3300 !important; }
.hidden{display:none!important}
</style>
</head>

<body>
  <div id="pageContent">

    <div class="bg"></div>

    <div class="spy-wrap">

      <div class="hud">
        <div class="score-box">
          <div class="score" id="scoreDisp">0</div>
          <div class="pb-chip" id="pbDisp">PB: 0</div>
        </div>

        <div class="hTitle">AUDIO_SPY</div>

        <div class="hRight">
          <div class="btn" id="soundBtn" title="Ses">üîä</div>
        </div>
      </div>

      <div class="main" id="gameArea">
        <div>
          <div class="visual">
            <div class="scan"></div>
            <div class="wave" id="wave">
              <div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div><div class="bar"></div>
            </div>
          </div>

          <button class="listen-btn" id="listenBtn">‚ñ∂ Sƒ∞NYALƒ∞ Dƒ∞NLE</button>

          <div class="opts" id="optionsArea"></div>
        </div>

        <div class="stats-bar">
          <div id="momDisp" style="color:var(--ok); font-weight:1000">x1.00 MOMENTUM</div>
          <div id="livesDisp">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
        </div>
      </div>

    </div>

    <div class="toast" id="toast">‚Äî</div>

    <!-- Start modal -->
    <div class="modal" id="startModal">
      <div class="card">
        <h2 style="color:var(--radar);font-family:'Share Tech Mono';margin:0">INCOMING SIGNAL</h2>
        <p style="opacity:.75;font-size:13px;margin:10px 0;line-height:1.45">
          2 Doƒüru = +1 Can üõ†Ô∏è (Max 3 Can)<br>
          Sinyali dinle ve de≈üifre et.
        </p>
        <div class="lang-grid">
          <button class="lang-btn active" data-lang="en">EN</button>
          <button class="lang-btn" data-lang="de">DE</button>
          <button class="lang-btn" data-lang="fr">FR</button>
          <button class="lang-btn" data-lang="es">ES</button>
          <button class="lang-btn" data-lang="it">IT</button>
        </div>
        <button class="main-btn" id="startBtn">Sƒ∞STEMƒ∞ BOOT ET</button>
      </div>
    </div>

    <!-- End modal -->
    <div class="modal hidden" id="endModal">
      <div class="card">
        <h2 id="endTitle" style="color:var(--radar);font-family:'Share Tech Mono';margin:0">SIGNAL COMPLETE</h2>
        <p id="endStats" style="margin:16px 0; font-size:15px; line-height:1.6"></p>
        <button class="main-btn" id="continueBtn">DE≈ûƒ∞FREYE DEVAM (Rƒ∞SK)</button>
        <button class="main-btn exit-btn" id="exitBtn">√áIKI≈û</button>
      </div>
    </div>

  </div>

  <script type="module">
    import { mountShell } from "/js/ui_shell.js";
    mountShell({ scroll:"none" });
  </script>

  <script type="module" src="/js/spy_page.js?v=1"></script>
</body>
</html>
